---
title: "Air-Gapped Deployments"
description: "How to deploy Tyk in air-gapped or network-restricted environments using private container registries"
sidebarTitle: "Air-Gapped Deployments"
---

## Overview

In some environments, particularly those with high-security requirements, direct access to public container registries like Docker Hub is restricted. This document provides guidance on how to deploy Tyk in such air-gapped or network-restricted environments.

The primary challenge in these environments is pulling Docker images, as Tyk images may have base images or dependencies that reside on public registries.

## Solution: Image Mirroring and Private Registry

The recommended approach is to pull all required Tyk Docker images in an environment with internet access, and then push them to a private container registry that is accessible from your air-gapped environment.

### Step 1: Identify and Pull Required Images

First, you need to identify all the Docker images required for your Tyk deployment. You can find these in the Tyk Helm charts.

Once identified, pull these images from the public registry (e.g., `docker.io`) to a machine with internet access.

### Step 2: Re-tag and Push Images to Your Private Registry

After pulling the images, you need to re-tag them to point to your private registry and then push them.

For example:

```bash
# Pull the Tyk Gateway image
docker pull docker.io/tykio/tyk-gateway:latest

# Re-tag the image for your private registry
docker tag docker.io/tykio/tyk-gateway:latest my-private-registry.com/tykio/tyk-gateway:latest

# Push the image to your private registry
docker push my-private-registry.com/tykio/tyk-gateway:latest
```

Repeat this process for all required Tyk images.

### Step 3: Configure Helm Charts to Use the Private Registry

Once all the images are available in your private registry, you need to update your Tyk Helm chart configuration (`values.yaml`) to pull images from your private registry instead of the default public one.

You will need to set the `image.registry` value in your Helm chart's `values.yaml` file to your private registry's address.

Example `values.yaml` modification:

```yaml
image:
  registry: my-private-registry.com
  # ... other image settings
```

### Alternative: Container Runtime (CRI) Mirror Configuration

An alternative approach is to configure your container runtime (e.g., Docker, containerd) to use a registry mirror. This redirects all pull requests from a public registry (like `docker.io`) to your internal private registry.

This configuration is done at the Kubernetes node level and depends on the specific container runtime you are using. Please refer to the documentation for your container runtime for instructions on how to configure registry mirrors.

By following these steps, you can successfully deploy and manage Tyk in a fully air-gapped or network-restricted environment.
